{"remainingRequest":"/Users/aleksej/Projects/what2vue/node_modules/babel-loader/lib/index.js!/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aleksej/Projects/what2vue/src/components/MultiSearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/aleksej/Projects/what2vue/src/components/MultiSearch.vue","mtime":1614764959202},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/babel-loader/lib/index.js","mtime":1610645748948},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js","mtime":1610645763935}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9hbGVrc2VqL1Byb2plY3RzL3doYXQydnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXBpIGZyb20gJ0AvYXBpJzsgLy8gbWVkaWFfdHlwZQovLyBpZAovLyBvcmlnaW5hbF90aXRsZQoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2hJbnB1dDogJycsCiAgICAgIHJlc3VsdHM6IFtdLAogICAgICBvcGVuOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBoYXNSZXN1bHRzOiBmdW5jdGlvbiBoYXNSZXN1bHRzKCkgewogICAgICByZXR1cm4gdGhpcy5yZXN1bHRzLmxlbmd0aCA+IDA7CiAgICB9LAogICAgaXNEcm9wZG93blZpc2libGU6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaGFzUmVzdWx0cyAmJiB0aGlzLm9wZW47CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CiAgICAgICAgdGhpcy5vcGVuID0gdmFsdWU7CiAgICAgIH0KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBzZWFyY2hJbnB1dDogZnVuY3Rpb24gc2VhcmNoSW5wdXQobikgewogICAgICBpZiAobi5sZW5ndGggPj0gMykgewogICAgICAgIHRoaXMuc2VhcmNoKG4pOwogICAgICAgIHRoaXMuaXNEcm9wZG93blZpc2libGUgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAobi5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLmlzRHJvcGRvd25WaXNpYmxlID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNlYXJjaDogZnVuY3Rpb24gc2VhcmNoKHF1ZXJ5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBhcGkuc2VhcmNoTXVsdGkuaW5kZXgoewogICAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfdGhpcy5yZXN1bHRzID0gcmVzcG9uc2UucmVzdWx0czsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["MultiSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA,OAAA,GAAA,MAAA,OAAA,C,CACA;AACA;AACA;;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA;AAHA,KAAA;AAKA,GAPA;AAQA,EAAA,QAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,aAAA,KAAA,OAAA,CAAA,MAAA,GAAA,CAAA;AACA,KAHA;AAIA,IAAA,iBAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,eAAA,KAAA,UAAA,IAAA,KAAA,IAAA;AACA,OAHA;AAIA,MAAA,GAJA,eAIA,KAJA,EAIA;AACA,aAAA,IAAA,GAAA,KAAA;AACA;AANA;AAJA,GARA;AAqBA,EAAA,KAAA,EAAA;AACA,IAAA,WADA,uBACA,CADA,EACA;AACA,UAAA,CAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,aAAA,MAAA,CAAA,CAAA;AACA,aAAA,iBAAA,GAAA,IAAA;AACA;;AACA,UAAA,CAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,aAAA,iBAAA,GAAA,KAAA;AACA;AACA;AATA,GArBA;AAgCA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,kBACA,KADA,EACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,GAAA,CAAA,WAAA,CAAA,KAAA,CAAA;AAAA,kBAAA,KAAA,EAAA;AAAA,iBAAA,CADA;;AAAA;AACA,gBAAA,QADA;AAEA,gBAAA,KAAA,CAAA,OAAA,GAAA,QAAA,CAAA,OAAA;AAFA,iDAGA,QAHA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AALA;AAhCA,CAAA","sourcesContent":["<template>\n  <div class=\"flex justify-center px-2 lg:justify-start\">\n    <div class=\"relative flex-1\">\n      <form autocomplete=\"off\" class=\"\" @submit.prevent>\n        <div class=\"max-w-lg w-full lg:max-w-xs relative z-20\">\n          <label title=\"search\"\n            ><span class=\"sr-only\">Search</span>\n            <div class=\"relative\">\n              <div\n                class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\n              >\n                <svg\n                  class=\"h-5 w-5 text-gray-400\"\n                  fill=\"currentColor\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path\n                    fill-rule=\"evenodd\"\n                    d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\"\n                    clip-rule=\"evenodd\"\n                  />\n                </svg>\n              </div>\n              <input\n                v-model=\"searchInput\"\n                class=\"block w-full pl-10 pr-3 py-2 rounded-md leading-6 bg-gray-700 placeholder-gray-400 focus:outline-none focus:bg-white text-sm transition duration-150 ease-in-out\"\n                placeholder=\"Search\"\n                type=\"search\"\n              />\n            </div>\n          </label>\n        </div>\n      </form>\n      <div\n        v-if=\"isDropdownVisible\"\n        class=\"absolute w-full left-0 top-0 pt-12 right-0 z-10 rounded-md bg-white shadow p-4\"\n      >\n        <ul v-for=\"result in results\" :key=\"result.id\">\n          <li>{{ result.original_title }}</li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport api from '@/api'\n// media_type\n// id\n// original_title\nexport default {\n  data() {\n    return {\n      searchInput: '',\n      results: [],\n      open: false,\n    }\n  },\n  computed: {\n    hasResults() {\n      return this.results.length > 0\n    },\n    isDropdownVisible: {\n      get() {\n        return this.hasResults && this.open\n      },\n      set(value) {\n        this.open = value\n      },\n    },\n  },\n  watch: {\n    searchInput(n) {\n      if (n.length >= 3) {\n        this.search(n)\n        this.isDropdownVisible = true\n      }\n      if (n.length === 0) {\n        this.isDropdownVisible = false\n      }\n    },\n  },\n  methods: {\n    async search(query) {\n      const response = await api.searchMulti.index({ query })\n      this.results = response.results\n      return response\n    },\n  },\n}\n</script>\n"],"sourceRoot":"src/components"}]}