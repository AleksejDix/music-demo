{"remainingRequest":"/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aleksej/Projects/what2vue/src/components/renderless/FormSelect.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/aleksej/Projects/what2vue/src/components/renderless/FormSelect.vue","mtime":1614764959202},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/babel-loader/lib/index.js","mtime":1610645748948},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js","mtime":1610645763935}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmNvbnN0IGV4Y2x1ZGVzID0gKGxpc3QpID0+ICh4KSA9PiAhbGlzdC5pbmNsdWRlcyh4KQoKY29uc3Qgc2V0Q3JlYXRlID0gKGxpc3QsIHNldCkgPT4KICAhbGlzdC5sZW5ndGggPyBzZXQgOiBsaXN0LmNvbmNhdChzZXQuZmlsdGVyKGV4Y2x1ZGVzKGxpc3QpKSkKCmNvbnN0IHNldERlc3Ryb3kgPSAobGlzdCwgc2V0KSA9PiBsaXN0LmZpbHRlcihleGNsdWRlcyhzZXQpKQoKY29uc3QgZ2V0SW5kZXggPSAobGlzdCwgeCkgPT4gbGlzdC5maW5kSW5kZXgoKG9wdGlvbikgPT4gb3B0aW9uLnZhbHVlID09PSB4KQoKY29uc3QgZ2V0U3ViU2V0ID0gKGxpc3QsIHN0YXJ0LCBlbmQpID0+IHsKICBjb25zdCBpMSA9IGdldEluZGV4KGxpc3QsIHN0YXJ0KQogIGNvbnN0IGkyID0gZ2V0SW5kZXgobGlzdCwgZW5kKQogIHJldHVybiBsaXN0CiAgICAuc2xpY2UoTWF0aC5taW4oaTIsIGkxKSwgTWF0aC5tYXgoaTIsIGkxKSArIDEpCiAgICAubWFwKChpdGVtKSA9PiBpdGVtLnZhbHVlKQp9CgpleHBvcnQgZGVmYXVsdCB7CiAgbW9kZWw6IHsKICAgIHByb3A6ICdzZWxlY3Rpb24nLAogICAgZXZlbnQ6ICd1cGRhdGUnLAogICAgbWVtb3J5OiB1bmRlZmluZWQsCiAgfSwKICBwcm9wczogewogICAgc2VsZWN0aW9uOiB7CiAgICAgIHR5cGU6IFtBcnJheSwgU3RyaW5nLCBOdW1iZXJdLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgIH0sCiAgICBvcHRpb25zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiBbXSwKICAgIH0sCiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ3NpbmdsZScsCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdGVkOiB1bmRlZmluZWQsCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgbGFzdCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWQubGVuZ3RoCiAgICAgICAgPyB0aGlzLnNlbGVjdGVkW3RoaXMuc2VsZWN0ZWQubGVuZ3RoIC0gMV0KICAgICAgICA6IHVuZGVmaW5lZAogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBzZWxlY3RlZCgpIHsKICAgICAgY29uc3QgeyBzZWxlY3RlZCB9ID0gdGhpcwogICAgICB0aGlzLiRlbWl0KCd1cGRhdGUnLCBzZWxlY3RlZCkKICAgIH0sCiAgICBtb2RlOiB7CiAgICAgIGhhbmRsZXIobmV3TW9kZSkgewogICAgICAgIGlmIChuZXdNb2RlID09PSAnbXVsdGknKSB7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkID0gW10KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zZWxlY3RlZCA9ICcnCiAgICAgICAgfQogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgc2VsZWN0KG9wdGlvbikgewogICAgICB0aGlzLm1lbW9yeSA9IHRoaXMubGFzdAoKICAgICAgY29uc3QgaW5jbHVkZXMgPSB0aGlzLnNlbGVjdGVkLmluY2x1ZGVzKG9wdGlvbi52YWx1ZSkKCiAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdtdWx0aScpIHsKICAgICAgICBpZiAodGhpcy5tZW1vcnkgJiYgZXZlbnQuc2hpZnRLZXkpIHsKICAgICAgICAgIGNvbnN0IHNldCA9IGdldFN1YlNldCh0aGlzLm9wdGlvbnMsIHRoaXMubWVtb3J5LCBvcHRpb24udmFsdWUpCiAgICAgICAgICBjb25zdCBzZXRUb2dnbGUgPSBpbmNsdWRlcyA/IHNldERlc3Ryb3kgOiBzZXRDcmVhdGUKICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBzZXRUb2dnbGUodGhpcy5zZWxlY3RlZCwgc2V0KQogICAgICAgIH0KCiAgICAgICAgaWYgKGluY2x1ZGVzKSB7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZC5maWx0ZXIoKHgpID0+IHggIT09IG9wdGlvbi52YWx1ZSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zZWxlY3RlZC5wdXNoKG9wdGlvbi52YWx1ZSkKICAgICAgICB9CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIHRoaXMuc2VsZWN0ZWQgPSBvcHRpb24udmFsdWUKICAgIH0sCiAgICBpc1NlbGVjdGVkKG9wdGlvbikgewogICAgICBpZiAodGhpcy5tb2RlID09PSAnbXVsdGknKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWQuaW5jbHVkZXMob3B0aW9uLnZhbHVlKQogICAgICB9CiAgICAgIHJldHVybiBvcHRpb24udmFsdWUgPT09IHRoaXMuc2VsZWN0ZWQKICAgIH0sCiAgfSwKICByZW5kZXIoKSB7CiAgICBjb25zdCB7IHNlbGVjdGVkLCBzZWxlY3QsIGlzU2VsZWN0ZWQsIG9wdGlvbnMsIG1lbW9yeSB9ID0gdGhpcwogICAgcmV0dXJuIHRoaXMuJHNjb3BlZFNsb3RzLmRlZmF1bHQoewogICAgICBzZWxlY3RlZCwKICAgICAgc2VsZWN0LAogICAgICBpc1NlbGVjdGVkLAogICAgICBvcHRpb25zLAogICAgICBtZW1vcnksCiAgICB9KQogIH0sCn0K"},{"version":3,"sources":["FormSelect.vue"],"names":[],"mappings":";AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FormSelect.vue","sourceRoot":"src/components/renderless","sourcesContent":["<script>\nconst excludes = (list) => (x) => !list.includes(x)\n\nconst setCreate = (list, set) =>\n  !list.length ? set : list.concat(set.filter(excludes(list)))\n\nconst setDestroy = (list, set) => list.filter(excludes(set))\n\nconst getIndex = (list, x) => list.findIndex((option) => option.value === x)\n\nconst getSubSet = (list, start, end) => {\n  const i1 = getIndex(list, start)\n  const i2 = getIndex(list, end)\n  return list\n    .slice(Math.min(i2, i1), Math.max(i2, i1) + 1)\n    .map((item) => item.value)\n}\n\nexport default {\n  model: {\n    prop: 'selection',\n    event: 'update',\n    memory: undefined,\n  },\n  props: {\n    selection: {\n      type: [Array, String, Number],\n      required: true,\n    },\n    options: {\n      type: Array,\n      default: () => [],\n    },\n    mode: {\n      type: String,\n      default: 'single',\n    },\n  },\n  data() {\n    return {\n      selected: undefined,\n    }\n  },\n  computed: {\n    last() {\n      return this.selected.length\n        ? this.selected[this.selected.length - 1]\n        : undefined\n    },\n  },\n  watch: {\n    selected() {\n      const { selected } = this\n      this.$emit('update', selected)\n    },\n    mode: {\n      handler(newMode) {\n        if (newMode === 'multi') {\n          this.selected = []\n        } else {\n          this.selected = ''\n        }\n      },\n      immediate: true,\n    },\n  },\n  methods: {\n    select(option) {\n      this.memory = this.last\n\n      const includes = this.selected.includes(option.value)\n\n      if (this.mode === 'multi') {\n        if (this.memory && event.shiftKey) {\n          const set = getSubSet(this.options, this.memory, option.value)\n          const setToggle = includes ? setDestroy : setCreate\n          this.selected = setToggle(this.selected, set)\n        }\n\n        if (includes) {\n          this.selected = this.selected.filter((x) => x !== option.value)\n        } else {\n          this.selected.push(option.value)\n        }\n        return\n      }\n\n      this.selected = option.value\n    },\n    isSelected(option) {\n      if (this.mode === 'multi') {\n        return this.selected.includes(option.value)\n      }\n      return option.value === this.selected\n    },\n  },\n  render() {\n    const { selected, select, isSelected, options, memory } = this\n    return this.$scopedSlots.default({\n      selected,\n      select,\n      isSelected,\n      options,\n      memory,\n    })\n  },\n}\n</script>\n"]}]}