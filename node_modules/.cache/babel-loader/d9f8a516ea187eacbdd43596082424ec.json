{"remainingRequest":"/Users/aleksej/Projects/what2vue/node_modules/babel-loader/lib/index.js!/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aleksej/Projects/what2vue/src/components/renderless/Fetch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/aleksej/Projects/what2vue/src/components/renderless/Fetch.vue","mtime":1615058374534},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/babel-loader/lib/index.js","mtime":1610645748948},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js","mtime":1610645763935}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG9uTW91bnRlZCwgcmVmIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGFwaWNhbGw6IHsKICAgICAgdHlwZTogUHJvbWlzZSwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChfcmVmKSB7CiAgICB2YXIgYXBpY2FsbCA9IF9yZWYuYXBpY2FsbDsKICAgIHZhciBkYXRhID0gcmVmKCk7CiAgICB2YXIgZXJyb3IgPSByZWYoKTsKICAgIHZhciBzdGF0ZSA9IHJlZignaWRsZScpOwogICAgdmFyIHN0YXRlcyA9IHsKICAgICAgaWRsZTogJ2lkbGUnLAogICAgICBsb2FkaW5nOiAnbG9hZGluZycsCiAgICAgIHN1Y2Nlc3M6ICdzdWNjZXNzJywKICAgICAgZXJyb3I6ICdlcnJvcicKICAgIH07CgogICAgdmFyIGxvYWQgPSBmdW5jdGlvbiBsb2FkKCkgewogICAgICBzdGF0ZS52YWx1ZSA9IHN0YXRlcy5sb2FkaW5nOwogICAgICBkYXRhLnZhbHVlID0gdW5kZWZpbmVkOwogICAgICBlcnJvci52YWx1ZSA9IHVuZGVmaW5lZDsKICAgICAgYXBpY2FsbC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHN0YXRlcywgcmVzcG9uc2UpOwogICAgICAgIHN0YXRlLnZhbHVlID0gc3RhdGVzLnN1Y2Nlc3M7CiAgICAgICAgZGF0YS52YWx1ZSA9IHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZXNwb25zZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgc3RhdGUudmFsdWUgPSBzdGF0ZXMuZXJyb3I7CiAgICAgICAgZGF0YS52YWx1ZSA9IHVuZGVmaW5lZDsKICAgICAgICBlcnJvci52YWx1ZSA9IGVycm9yOwogICAgICB9KTsKICAgIH07CgogICAgb25Nb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgbG9hZCgpOwogICAgfSk7CiAgICByZXR1cm4gewogICAgICBkYXRhOiBkYXRhLAogICAgICBsb2FkOiBsb2FkLAogICAgICBlcnJvcjogZXJyb3IsCiAgICAgIHN0YXRlOiBzdGF0ZQogICAgfTsKICB9Cn07"},{"version":3,"sources":["Fetch.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA,SAAA,SAAA,EAAA,GAAA,QAAA,sBAAA;AAEA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GADA;AAOA,EAAA,KAPA,uBAOA;AAAA,QAAA,OAAA,QAAA,OAAA;AACA,QAAA,IAAA,GAAA,GAAA,EAAA;AACA,QAAA,KAAA,GAAA,GAAA,EAAA;AACA,QAAA,KAAA,GAAA,GAAA,CAAA,MAAA,CAAA;AAEA,QAAA,MAAA,GAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,SAFA;AAGA,MAAA,OAAA,EAAA,SAHA;AAIA,MAAA,KAAA,EAAA;AAJA,KAAA;;AAOA,QAAA,IAAA,GAAA,SAAA,IAAA,GAAA;AACA,MAAA,KAAA,CAAA,KAAA,GAAA,MAAA,CAAA,OAAA;AACA,MAAA,IAAA,CAAA,KAAA,GAAA,SAAA;AACA,MAAA,KAAA,CAAA,KAAA,GAAA,SAAA;AAEA,MAAA,OAAA,CACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,MAAA,EAAA,QAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,MAAA,CAAA,OAAA;AACA,QAAA,IAAA,CAAA,KAAA,GAAA,QAAA;AACA,eAAA,QAAA;AACA,OANA,EAOA,KAPA,CAOA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,MAAA,CAAA,KAAA;AACA,QAAA,IAAA,CAAA,KAAA,GAAA,SAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,KAAA;AACA,OAXA;AAYA,KAjBA;;AAmBA,IAAA,SAAA,CAAA,YAAA;AACA,MAAA,IAAA;AACA,KAFA,CAAA;AAIA,WAAA;AAAA,MAAA,IAAA,EAAA,IAAA;AAAA,MAAA,IAAA,EAAA,IAAA;AAAA,MAAA,KAAA,EAAA,KAAA;AAAA,MAAA,KAAA,EAAA;AAAA,KAAA;AACA;AA3CA,CAAA","sourcesContent":["<template>\n  <div>\n    <slot v-if=\"state === 'error'\" name=\"error\" v-bind=\"{ error, load }\">\n      <pre>{{ error }}</pre>\n    </slot>\n    <slot v-if=\"state === 'success'\" name=\"success\" v-bind=\"{ data, load }\">\n      <pre>{{ data }}</pre>\n    </slot>\n    <slot v-if=\"state === 'loading'\" name=\"loading\">loading...</slot>\n  </div>\n</template>\n\n<script>\nimport { onMounted, ref } from '@vue/composition-api'\n\nexport default {\n  props: {\n    apicall: {\n      type: Promise,\n      required: true,\n    },\n  },\n  setup({ apicall }) {\n    const data = ref()\n    const error = ref()\n    const state = ref('idle')\n\n    const states = {\n      idle: 'idle',\n      loading: 'loading',\n      success: 'success',\n      error: 'error',\n    }\n\n    const load = () => {\n      state.value = states.loading\n      data.value = undefined\n      error.value = undefined\n\n      apicall\n        .then((response) => {\n          console.log(states, response)\n          state.value = states.success\n          data.value = response\n          return response\n        })\n        .catch((error) => {\n          state.value = states.error\n          data.value = undefined\n          error.value = error\n        })\n    }\n\n    onMounted(() => {\n      load()\n    })\n\n    return { data, load, error, state }\n  },\n}\n</script>\n"],"sourceRoot":"src/components/renderless"}]}