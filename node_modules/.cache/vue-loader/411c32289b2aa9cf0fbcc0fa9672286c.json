{"remainingRequest":"/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aleksej/Projects/what2vue/src/views/Movie/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/aleksej/Projects/what2vue/src/views/Movie/index.vue","mtime":1615060632748},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/babel-loader/lib/index.js","mtime":1610645748948},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js","mtime":1610645763935}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAnQC9hcGknCgpjb25zdCBnZXRGaXJzdFZpZGVvID0gKGlkKSA9PiBhc3luYyAoKSA9PiB7CiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkubW92aWVWaWRlb3MuaW5kZXgoaWQpCiAgY29uc3QgW2ZpcnN0VmlkZW9dID0gcmVzcG9uc2UucmVzdWx0cwogIGlmICghZmlyc3RWaWRlbykgcmV0dXJuCiAgaWYgKCFmaXJzdFZpZGVvLmtleSkgcmV0dXJuCiAgcmV0dXJuIGZpcnN0VmlkZW8ua2V5Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwKICAgICAgbG9hZGVkOiBmYWxzZSwKICAgICAgbW92aWU6ICcnLAogICAgICB2aWRlbzogJycsCiAgICAgIHBlb3BsZToge30sCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgaXNGYXZvcml0ZSgpIHsKICAgICAgcmV0dXJuICEhdGhpcy4kc3RvcmUuZ2V0dGVycy5zaG93KHRoaXMubW92aWUuaWQpCiAgICB9LAogICAgdmlkZW9VUkwoKSB7CiAgICAgIGlmICghdGhpcy52aWRlbykgcmV0dXJuCiAgICAgIHJldHVybiBgaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvJHt0aGlzLnZpZGVvfWAKICAgIH0sCiAgICBwb3N0ZXJVUkwoKSB7CiAgICAgIGlmICghdGhpcy5tb3ZpZS5wb3N0ZXJfcGF0aCkgcmV0dXJuCiAgICAgIHJldHVybiBgaHR0cHM6Ly9pbWFnZS50bWRiLm9yZy90L3AvdzUwMC8ke3RoaXMubW92aWUucG9zdGVyX3BhdGh9YAogICAgfSwKICAgIGJhY2tncm91bmRVUkwoKSB7CiAgICAgIGlmICghdGhpcy5tb3ZpZS5iYWNrZHJvcF9wYXRoKSByZXR1cm4KICAgICAgcmV0dXJuIGBodHRwczovL2ltYWdlLnRtZGIub3JnL3QvcC93MTQwMF9hbmRfaDQ1MF9mYWNlLyR7dGhpcy5tb3ZpZS5iYWNrZHJvcF9wYXRofWAKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXRNb3ZpZVBhZ2UoKQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZUxheW91dCcsICdTaW5nbGVQYWdlTGF5b3V0JykKICB9LAogIG1ldGhvZHM6IHsKICAgIHRvZ2dsZUZhdm9yaXRlKCkgewogICAgICB0aGlzLmlzRmF2b3JpdGUKICAgICAgICA/IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdERVNUUk9ZX0ZBVk9SSVRFJywgdGhpcy5tb3ZpZS5pZCkKICAgICAgICA6IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdTVE9SRV9GQVZPUklURScsIHRoaXMubW92aWUpCiAgICB9LAogICAgYXN5bmMgZ2V0TW92aWUoKSB7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLm1vdmllLnNob3codGhpcy5pZCkKICAgICAgcmV0dXJuIHJlc3BvbnNlCiAgICB9LAogICAgZ2V0TW92aWVQYWdlKCkgewogICAgICB0aGlzLmxvYWRlZCA9IGZhbHNlCiAgICAgIGNvbnN0IHNldE1vdmllID0gKG1vdmllKSA9PiAoKHRoaXMubW92aWUgPSBtb3ZpZSksIG1vdmllKQoKICAgICAgY29uc3Qgc2V0VmlkZW8gPSAodmlkZW8pID0+IHsKICAgICAgICB0aGlzLnZpZGVvID0gdmlkZW8KICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuZ2V0TW92aWUoKQogICAgICAgIC50aGVuKHNldE1vdmllKQogICAgICAgIC50aGVuKGdldEZpcnN0VmlkZW8odGhpcy5pZCkpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWUKICAgICAgICAgIHNldFZpZGVvKHJlc3BvbnNlKQogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlCiAgICAgICAgfSkKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Movie","sourcesContent":["<template>\n  <div v-if=\"movie\">\n    <div\n      class=\"banner flex items-center justify-center\"\n      :style=\"{\n        backgroundColor: 'rgba(0, 0, 0, 0.55)',\n        backgroundImage: 'url(' + backgroundURL + ')',\n      }\"\n    >\n      <div class=\"flex items-center justify-center h-32\">\n        <h1 class=\"text-white text-5xl font-extralight\">\n          {{ movie.title }}\n        </h1>\n      </div>\n    </div>\n    <section class=\"max-w-7xl mx-auto sm:px-6 lg:px-8\">\n      <div class=\"offset grid gap-2\">\n        <div class=\"flex flex-col sm:flex-row\">\n          <div class=\"poster order-2\">\n            <img v-if=\"posterURL\" class=\"poster__img\" :src=\"posterURL\" />\n          </div>\n          <div class=\"video order-1\">\n            <div v-if=\"videoURL\" class=\"ratio\">\n              <iframe\n                class=\"ratio-object\"\n                :src=\"videoURL\"\n                frameborder=\"0\"\n                allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n                allowfullscreen\n              ></iframe>\n            </div>\n          </div>\n        </div>\n        <div>\n          <div class=\"flex gap-4 py-4\">\n            <button class=\"app-button\" @click=\"toggleFavorite\">\n              {{ isFavorite ? 'remove from' : 'add to' }} favorites\n            </button>\n\n            <router-link class=\"app-button\" :to=\"{ name: 'cast' }\"\n              >cast</router-link\n            >\n            <router-link class=\"app-button\" :to=\"{ name: 'crew' }\"\n              >crew</router-link\n            >\n          </div>\n          <transition name=\"fade\" mode=\"out-in px-4\">\n            <router-view />\n          </transition>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport api from '@/api'\n\nconst getFirstVideo = (id) => async () => {\n  const response = await api.movieVideos.index(id)\n  const [firstVideo] = response.results\n  if (!firstVideo) return\n  if (!firstVideo.key) return\n  return firstVideo.key\n}\n\nexport default {\n  data() {\n    return {\n      id: this.$route.params.id,\n      loaded: false,\n      movie: '',\n      video: '',\n      people: {},\n    }\n  },\n  computed: {\n    isFavorite() {\n      return !!this.$store.getters.show(this.movie.id)\n    },\n    videoURL() {\n      if (!this.video) return\n      return `https://www.youtube.com/embed/${this.video}`\n    },\n    posterURL() {\n      if (!this.movie.poster_path) return\n      return `https://image.tmdb.org/t/p/w500/${this.movie.poster_path}`\n    },\n    backgroundURL() {\n      if (!this.movie.backdrop_path) return\n      return `https://image.tmdb.org/t/p/w1400_and_h450_face/${this.movie.backdrop_path}`\n    },\n  },\n  mounted() {\n    this.getMoviePage()\n  },\n  created() {\n    this.$emit('updateLayout', 'SinglePageLayout')\n  },\n  methods: {\n    toggleFavorite() {\n      this.isFavorite\n        ? this.$store.dispatch('DESTROY_FAVORITE', this.movie.id)\n        : this.$store.dispatch('STORE_FAVORITE', this.movie)\n    },\n    async getMovie() {\n      const response = await api.movie.show(this.id)\n      return response\n    },\n    getMoviePage() {\n      this.loaded = false\n      const setMovie = (movie) => ((this.movie = movie), movie)\n\n      const setVideo = (video) => {\n        this.video = video\n      }\n\n      return this.getMovie()\n        .then(setMovie)\n        .then(getFirstVideo(this.id))\n        .then((response) => {\n          this.loaded = true\n          setVideo(response)\n          return response\n        })\n    },\n  },\n}\n</script>\n\n<style scoped>\n.movie__title {\n  color: #f5f5f5;\n  font-size: 2rem;\n  line-height: 1.125;\n  text-align: center;\n}\n.ratio {\n  position: relative;\n  width: 100%;\n  padding-bottom: 56.5%;\n}\n\n.ratio-object {\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n.poster,\n.video {\n  width: 100%;\n}\n.poster__img {\n  width: 100%;\n  max-width: 100%;\n}\n\n.preview {\n  background-color: #0f1c26;\n  width: 100%;\n  overflow: hidden;\n  border-radius: 4px;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.12), 0 2px 4px 0 rgba(0, 0, 0, 0.08);\n}\n\n@media (min-width: 640px) {\n  .movie__title {\n    font-size: 3rem;\n  }\n  .offset {\n    transform: translateY(-200px);\n  }\n\n  .poster {\n    width: 27.5%;\n  }\n\n  .video {\n    width: 73%;\n  }\n\n  .banner {\n    background-color: #e5e5e5;\n    height: 512px;\n    background-size: cover;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-blend-mode: multiply;\n  }\n}\n</style>\n"]}]}