{"remainingRequest":"/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aleksej/Projects/what2vue/src/components/MultiSearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/aleksej/Projects/what2vue/src/components/MultiSearch.vue","mtime":1615055774851},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/babel-loader/lib/index.js","mtime":1610645748948},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js","mtime":1610645763935}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAnQC9hcGknCmltcG9ydCBCYWRnZSBmcm9tICdAL2NvbXBvbmVudHMvQmFkZ2UudnVlJwovLyBtZWRpYV90eXBlCi8vIGlkCi8vIG9yaWdpbmFsX3RpdGxlCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBCYWRnZSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2hJbnB1dDogJycsCiAgICAgIHJlc3VsdHM6IFtdLAogICAgICBvcGVuOiBmYWxzZSwKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBoYXNSZXN1bHRzKCkgewogICAgICByZXR1cm4gdGhpcy5yZXN1bHRzLmxlbmd0aCA+IDAKICAgIH0sCiAgICBpc0Ryb3Bkb3duVmlzaWJsZTogewogICAgICBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaGFzUmVzdWx0cyAmJiB0aGlzLm9wZW4KICAgICAgfSwKICAgICAgc2V0KHZhbHVlKSB7CiAgICAgICAgdGhpcy5vcGVuID0gdmFsdWUKICAgICAgfSwKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgc2VhcmNoSW5wdXQobikgewogICAgICBpZiAobi5sZW5ndGggPj0gMykgewogICAgICAgIHRoaXMuc2VhcmNoKG4pCiAgICAgICAgdGhpcy5pc0Ryb3Bkb3duVmlzaWJsZSA9IHRydWUKICAgICAgfQogICAgICBpZiAobi5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLmlzRHJvcGRvd25WaXNpYmxlID0gZmFsc2UKICAgICAgfQogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIHNlYXJjaChxdWVyeSkgewogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5zZWFyY2hNdWx0aS5pbmRleCh7IHF1ZXJ5IH0pCiAgICAgIHRoaXMucmVzdWx0cyA9IHJlc3BvbnNlLnJlc3VsdHMKICAgICAgcmV0dXJuIHJlc3BvbnNlCiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["MultiSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MultiSearch.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"flex justify-center px-2 lg:justify-start lg:max-w-xs\">\n    <div class=\"relative flex-1\">\n      <div\n        v-if=\"isDropdownVisible\"\n        class=\"absolute w-full z-10 left-0 top-0 pt-12 right-0 rounded-md bg-white shadow p-1\"\n      >\n        <ul class=\"grid gap-1\">\n          <li v-for=\"result in results\" :key=\"result.id\">\n            <router-link\n              :to=\"{\n                name: 'cast',\n                params: {\n                  id: result.id,\n                },\n              }\"\n              class=\"flex gap-3 hover:bg-gray-400 p-2 bg-gray-200 rounded transition-all\"\n              @click.native=\"open = false\"\n            >\n              <div v-if=\"result.poster_path\" class=\"w-1/5\">\n                <img\n                  class=\"w-32 h-9 object-cover\"\n                  :src=\"`https://image.tmdb.org/t/p/w342/${result.poster_path}`\"\n                />\n              </div>\n              <div class=\"flex-1 leading-none\">\n                <span class=\"font-medium\">\n                  {{ result.title }}\n                </span>\n                <Badge>{{ result.vote_average }}</Badge>\n              </div>\n            </router-link>\n          </li>\n        </ul>\n      </div>\n      <form autocomplete=\"off\" class=\"\" @submit.prevent>\n        <div class=\"max-w-lg w-full relative\">\n          <label title=\"search\" class=\"w-full\"\n            ><span class=\"sr-only\">Search</span>\n            <div class=\"relative z-20\">\n              <div\n                class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\n              >\n                <svg\n                  class=\"h-5 w-5 text-gray-400\"\n                  fill=\"currentColor\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path\n                    fill-rule=\"evenodd\"\n                    d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\"\n                    clip-rule=\"evenodd\"\n                  />\n                </svg>\n              </div>\n              <input\n                v-model=\"searchInput\"\n                class=\"block w-full pl-10 pr-3 py-2 rounded-md leading-6 bg-gray-700 placeholder-gray-400 focus:outline-none focus:bg-white text-sm transition duration-150 ease-in-out\"\n                placeholder=\"Search\"\n                type=\"search\"\n              />\n            </div>\n          </label>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport api from '@/api'\nimport Badge from '@/components/Badge.vue'\n// media_type\n// id\n// original_title\nexport default {\n  components: {\n    Badge,\n  },\n  data() {\n    return {\n      searchInput: '',\n      results: [],\n      open: false,\n    }\n  },\n  computed: {\n    hasResults() {\n      return this.results.length > 0\n    },\n    isDropdownVisible: {\n      get() {\n        return this.hasResults && this.open\n      },\n      set(value) {\n        this.open = value\n      },\n    },\n  },\n  watch: {\n    searchInput(n) {\n      if (n.length >= 3) {\n        this.search(n)\n        this.isDropdownVisible = true\n      }\n      if (n.length === 0) {\n        this.isDropdownVisible = false\n      }\n    },\n  },\n  methods: {\n    async search(query) {\n      const response = await api.searchMulti.index({ query })\n      this.results = response.results\n      return response\n    },\n  },\n}\n</script>\n"]}]}