{"remainingRequest":"/Users/aleksej/Projects/what2vue/node_modules/babel-loader/lib/index.js!/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aleksej/Projects/what2vue/src/components/MultiSearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/aleksej/Projects/what2vue/src/components/MultiSearch.vue","mtime":1615055774851},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/babel-loader/lib/index.js","mtime":1610645748948},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js","mtime":1610645763935}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9hbGVrc2VqL1Byb2plY3RzL3doYXQydnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXBpIGZyb20gJ0AvYXBpJzsKaW1wb3J0IEJhZGdlIGZyb20gJ0AvY29tcG9uZW50cy9CYWRnZS52dWUnOyAvLyBtZWRpYV90eXBlCi8vIGlkCi8vIG9yaWdpbmFsX3RpdGxlCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQmFkZ2U6IEJhZGdlCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoSW5wdXQ6ICcnLAogICAgICByZXN1bHRzOiBbXSwKICAgICAgb3BlbjogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaGFzUmVzdWx0czogZnVuY3Rpb24gaGFzUmVzdWx0cygpIHsKICAgICAgcmV0dXJuIHRoaXMucmVzdWx0cy5sZW5ndGggPiAwOwogICAgfSwKICAgIGlzRHJvcGRvd25WaXNpYmxlOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiB0aGlzLmhhc1Jlc3VsdHMgJiYgdGhpcy5vcGVuOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICAgIHRoaXMub3BlbiA9IHZhbHVlOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgc2VhcmNoSW5wdXQ6IGZ1bmN0aW9uIHNlYXJjaElucHV0KG4pIHsKICAgICAgaWYgKG4ubGVuZ3RoID49IDMpIHsKICAgICAgICB0aGlzLnNlYXJjaChuKTsKICAgICAgICB0aGlzLmlzRHJvcGRvd25WaXNpYmxlID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKG4ubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5pc0Ryb3Bkb3duVmlzaWJsZSA9IGZhbHNlOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZWFyY2g6IGZ1bmN0aW9uIHNlYXJjaChxdWVyeSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gYXBpLnNlYXJjaE11bHRpLmluZGV4KHsKICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX3RoaXMucmVzdWx0cyA9IHJlc3BvbnNlLnJlc3VsdHM7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["MultiSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA,OAAA,GAAA,MAAA,OAAA;AACA,OAAA,KAAA,MAAA,wBAAA,C,CACA;AACA;AACA;;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,KAAA,EAAA;AADA,GADA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA;AAHA,KAAA;AAKA,GAVA;AAWA,EAAA,QAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,aAAA,KAAA,OAAA,CAAA,MAAA,GAAA,CAAA;AACA,KAHA;AAIA,IAAA,iBAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,eAAA,KAAA,UAAA,IAAA,KAAA,IAAA;AACA,OAHA;AAIA,MAAA,GAJA,eAIA,KAJA,EAIA;AACA,aAAA,IAAA,GAAA,KAAA;AACA;AANA;AAJA,GAXA;AAwBA,EAAA,KAAA,EAAA;AACA,IAAA,WADA,uBACA,CADA,EACA;AACA,UAAA,CAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,aAAA,MAAA,CAAA,CAAA;AACA,aAAA,iBAAA,GAAA,IAAA;AACA;;AACA,UAAA,CAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,aAAA,iBAAA,GAAA,KAAA;AACA;AACA;AATA,GAxBA;AAmCA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,kBACA,KADA,EACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,GAAA,CAAA,WAAA,CAAA,KAAA,CAAA;AAAA,kBAAA,KAAA,EAAA;AAAA,iBAAA,CADA;;AAAA;AACA,gBAAA,QADA;AAEA,gBAAA,KAAA,CAAA,OAAA,GAAA,QAAA,CAAA,OAAA;AAFA,iDAGA,QAHA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AALA;AAnCA,CAAA","sourcesContent":["<template>\n  <div class=\"flex justify-center px-2 lg:justify-start lg:max-w-xs\">\n    <div class=\"relative flex-1\">\n      <div\n        v-if=\"isDropdownVisible\"\n        class=\"absolute w-full z-10 left-0 top-0 pt-12 right-0 rounded-md bg-white shadow p-1\"\n      >\n        <ul class=\"grid gap-1\">\n          <li v-for=\"result in results\" :key=\"result.id\">\n            <router-link\n              :to=\"{\n                name: 'cast',\n                params: {\n                  id: result.id,\n                },\n              }\"\n              class=\"flex gap-3 hover:bg-gray-400 p-2 bg-gray-200 rounded transition-all\"\n              @click.native=\"open = false\"\n            >\n              <div v-if=\"result.poster_path\" class=\"w-1/5\">\n                <img\n                  class=\"w-32 h-9 object-cover\"\n                  :src=\"`https://image.tmdb.org/t/p/w342/${result.poster_path}`\"\n                />\n              </div>\n              <div class=\"flex-1 leading-none\">\n                <span class=\"font-medium\">\n                  {{ result.title }}\n                </span>\n                <Badge>{{ result.vote_average }}</Badge>\n              </div>\n            </router-link>\n          </li>\n        </ul>\n      </div>\n      <form autocomplete=\"off\" class=\"\" @submit.prevent>\n        <div class=\"max-w-lg w-full relative\">\n          <label title=\"search\" class=\"w-full\"\n            ><span class=\"sr-only\">Search</span>\n            <div class=\"relative z-20\">\n              <div\n                class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\n              >\n                <svg\n                  class=\"h-5 w-5 text-gray-400\"\n                  fill=\"currentColor\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path\n                    fill-rule=\"evenodd\"\n                    d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\"\n                    clip-rule=\"evenodd\"\n                  />\n                </svg>\n              </div>\n              <input\n                v-model=\"searchInput\"\n                class=\"block w-full pl-10 pr-3 py-2 rounded-md leading-6 bg-gray-700 placeholder-gray-400 focus:outline-none focus:bg-white text-sm transition duration-150 ease-in-out\"\n                placeholder=\"Search\"\n                type=\"search\"\n              />\n            </div>\n          </label>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport api from '@/api'\nimport Badge from '@/components/Badge.vue'\n// media_type\n// id\n// original_title\nexport default {\n  components: {\n    Badge,\n  },\n  data() {\n    return {\n      searchInput: '',\n      results: [],\n      open: false,\n    }\n  },\n  computed: {\n    hasResults() {\n      return this.results.length > 0\n    },\n    isDropdownVisible: {\n      get() {\n        return this.hasResults && this.open\n      },\n      set(value) {\n        this.open = value\n      },\n    },\n  },\n  watch: {\n    searchInput(n) {\n      if (n.length >= 3) {\n        this.search(n)\n        this.isDropdownVisible = true\n      }\n      if (n.length === 0) {\n        this.isDropdownVisible = false\n      }\n    },\n  },\n  methods: {\n    async search(query) {\n      const response = await api.searchMulti.index({ query })\n      this.results = response.results\n      return response\n    },\n  },\n}\n</script>\n"],"sourceRoot":"src/components"}]}