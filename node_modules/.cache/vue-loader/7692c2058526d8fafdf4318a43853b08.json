{"remainingRequest":"/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aleksej/Projects/what2vue/src/components/renderless/Player.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/aleksej/Projects/what2vue/src/components/renderless/Player.vue","mtime":1614846518039},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/babel-loader/lib/index.js","mtime":1610645748948},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js","mtime":1610645763935}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBtb2RlbDogewogICAgcHJvcDogJ3RoaW5ncycsCiAgICBldmVudDogJ3VwZGF0ZScsCiAgfSwKICBwcm9wczogewogICAgYXV0bzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgIH0sCiAgICBzcGVlZDogewogICAgICB0eXBlOiBbTnVtYmVyXSwKICAgICAgZGVmYXVsdDogMTAwMCwKICAgIH0sCiAgICB0aGluZ3M6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgfSwKICAgIGNvbnRyb2xzOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjdXJyZW50U3RhdGU6ICdzdG9wJywKICAgICAgYXV0b1BsYXllcjogbnVsbCwKICAgICAgY3VycmVudDogMCwKICAgICAgaXNQYXVzZWQ6IGZhbHNlLAogICAgICBpc1BsYXlpbmc6IGZhbHNlLAogICAgICBpc1N0b3BlZDogdHJ1ZSwKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICB0b3RhbCgpIHsKICAgICAgcmV0dXJuIHRoaXMudGhpbmdzLmxlbmd0aAogICAgfSwKICAgIHNvbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLnRvdGFsID4gMAogICAgfSwKICAgIGlzRmlyc3QoKSB7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQgPT09IDAKICAgIH0sCiAgICBpc0xhc3QoKSB7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQgPT09IHRoaXMudG90YWwgLSAxCiAgICB9LAogICAgaXNPbkhvbGQoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzUGF1c2VkIHx8IHRoaXMuaW50ZXJydXB0ZWQgfHwgdGhpcy5mb2N1c3NlZAogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy5hdXRvKSB7CiAgICAgIHRoaXMucGxheSgpCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBfcnVuKCkgewogICAgICBpZiAodGhpcy5pc09uSG9sZCkgcmV0dXJuCiAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZQogICAgICB0aGlzLmZvcndhcmQoKQogICAgfSwKICAgIGdvKGRpcmVjdGlvbikgewogICAgICBpZiAoTWF0aC5hYnMoZGlyZWN0aW9uKSA+IHRoaXMudG90YWwgfHwgZGlyZWN0aW9uID09PSAwKSByZXR1cm4KICAgICAgLy8gc3RvcCB0aGUgYXV0bwogICAgICB0aGlzLnN0b3AoKQoKICAgICAgY29uc3QgbmV4dCA9IHRoaXMuY3VycmVudCArIGRpcmVjdGlvbgoKICAgICAgY29uc3QgYmFja3dhcmQgPSB0aGlzLmlzRmlyc3QgPyB0aGlzLnRvdGFsIC0gMSA6IG5leHQKICAgICAgY29uc3QgZm9yd2FyZCA9IHRoaXMuaXNMYXN0ID8gMCA6IG5leHQKCiAgICAgIHRoaXMuY3VycmVudCA9IGRpcmVjdGlvbiA8IDAgPyBiYWNrd2FyZCA6IGZvcndhcmQKCiAgICAgIC8vIHN0b3AgdGhlIGF1dG8KICAgICAgdGhpcy5wbGF5KCkKICAgIH0sCiAgICBzZWxlY3QocGllY2UpIHsKICAgICAgdGhpcy5jdXJyZW50ID0gcGllY2UKICAgIH0sCiAgICBiYWNrKCkgewogICAgICB0aGlzLmdvKC0xKQogICAgfSwKICAgIGZvcndhcmQoKSB7CiAgICAgIHRoaXMuZ28oMSkKICAgIH0sCiAgICBwYXVzZSgpIHsKICAgICAgdGhpcy5pc1BhdXNlZCA9ICF0aGlzLmlzUGF1c2VkCiAgICB9LAogICAgcGxheSgpIHsKICAgICAgdGhpcy5hdXRvUGxheWVyID0gc2V0SW50ZXJ2YWwodGhpcy5fcnVuLCB0aGlzLnNwZWVkKQogICAgfSwKICAgIHN0b3AoKSB7CiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5hdXRvUGxheWVyKQogICAgICB0aGlzLmlzUGxheWluZyA9IGZhbHNlCiAgICB9LAogIH0sCiAgZGVzdHJveSgpIHsKICAgIHRoaXMuc3RvcCgpCiAgfSwKfQo="},{"version":3,"sources":["Player.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Player.vue","sourceRoot":"src/components/renderless","sourcesContent":["<template>\n  <div @mouseenter=\"pause\" @mouseleave=\"pause\">\n    <slot\n      :things=\"things\"\n      :play=\"play\"\n      :pause=\"pause\"\n      :stop=\"stop\"\n      :total=\"total\"\n      :some=\"some\"\n      :current=\"current\"\n      :select=\"select\"\n      :back=\"back\"\n      :forward=\"forward\"\n    >\n    </slot>\n    <slot name=\"controls\">\n      <div v-if=\"controls\">\n        {{ current + 1 }} / {{ total }}\n        <button @click=\"back\">back</button>\n        <button @click=\"forward\">next</button>\n      </div>\n    </slot>\n  </div>\n</template>\n\n<script>\nexport default {\n  model: {\n    prop: 'things',\n    event: 'update',\n  },\n  props: {\n    auto: {\n      type: Boolean,\n      default: false,\n    },\n    speed: {\n      type: [Number],\n      default: 1000,\n    },\n    things: {\n      type: Array,\n      required: true,\n    },\n    controls: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      currentState: 'stop',\n      autoPlayer: null,\n      current: 0,\n      isPaused: false,\n      isPlaying: false,\n      isStoped: true,\n    }\n  },\n  computed: {\n    total() {\n      return this.things.length\n    },\n    some() {\n      return this.total > 0\n    },\n    isFirst() {\n      return this.current === 0\n    },\n    isLast() {\n      return this.current === this.total - 1\n    },\n    isOnHold() {\n      return this.isPaused || this.interrupted || this.focussed\n    },\n  },\n  mounted() {\n    if (this.auto) {\n      this.play()\n    }\n  },\n  methods: {\n    _run() {\n      if (this.isOnHold) return\n      this.isPlaying = true\n      this.forward()\n    },\n    go(direction) {\n      if (Math.abs(direction) > this.total || direction === 0) return\n      // stop the auto\n      this.stop()\n\n      const next = this.current + direction\n\n      const backward = this.isFirst ? this.total - 1 : next\n      const forward = this.isLast ? 0 : next\n\n      this.current = direction < 0 ? backward : forward\n\n      // stop the auto\n      this.play()\n    },\n    select(piece) {\n      this.current = piece\n    },\n    back() {\n      this.go(-1)\n    },\n    forward() {\n      this.go(1)\n    },\n    pause() {\n      this.isPaused = !this.isPaused\n    },\n    play() {\n      this.autoPlayer = setInterval(this._run, this.speed)\n    },\n    stop() {\n      clearInterval(this.autoPlayer)\n      this.isPlaying = false\n    },\n  },\n  destroy() {\n    this.stop()\n  },\n}\n</script>\n"]}]}