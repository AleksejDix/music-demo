{"remainingRequest":"/Users/aleksej/Projects/what2vue/node_modules/babel-loader/lib/index.js!/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aleksej/Projects/what2vue/src/views/Category/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/aleksej/Projects/what2vue/src/views/Category/index.vue","mtime":1615051598021},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/babel-loader/lib/index.js","mtime":1610645748948},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js","mtime":1610645763935}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9hbGVrc2VqL1Byb2plY3RzL3doYXQydnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGFwaSBmcm9tICdAL2FwaSc7CmltcG9ydCBNb3ZpZUxpc3QgZnJvbSAnQC9jb21wb25lbnRzL01vdmllTGlzdCc7CmltcG9ydCBJbnRlcnNlY3Rpb25PYnNlcnZlciBmcm9tICdAL2NvbXBvbmVudHMvSW50ZXJzZWN0aW9uT2JzZXJ2ZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTW92aWVMaXN0OiBNb3ZpZUxpc3QsCiAgICBJbnRlcnNlY3Rpb25PYnNlcnZlcjogSW50ZXJzZWN0aW9uT2JzZXJ2ZXIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwYWdlOiAxLAogICAgICBtb3ZpZXM6IFtdLAogICAgICB0b3RhbDogMAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBoYXNNb3ZpZXM6IGZ1bmN0aW9uIGhhc01vdmllcygpIHsKICAgICAgaWYgKCF0aGlzLm1vdmllcykgcmV0dXJuOwogICAgICByZXR1cm4gdGhpcy5tb3ZpZXMubGVuZ3RoID4gMDsKICAgIH0sCiAgICBuYW1lOiBmdW5jdGlvbiBuYW1lKCkgewogICAgICB2YXIgY2F0ZWdveSA9IGFwaS5jYXRlZ29yeS5zaG93KHRoaXMuJHJvdXRlLnBhcmFtcy5pZCk7CiAgICAgIHJldHVybiBjYXRlZ295Lm5hbWU7CiAgICB9LAogICAgcXVlcnk6IGZ1bmN0aW9uIHF1ZXJ5KCkgewogICAgICByZXR1cm4gewogICAgICAgIHBhZ2U6IHRoaXMucGFnZQogICAgICB9OwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgICdxdWVyeS5wYWdlJzogZnVuY3Rpb24gcXVlcnlQYWdlKG5leHQsIHByZXYpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEobmV4dCA+IHByZXYpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy5xdWVyeS5wYWdlID0gbmV4dDsKCiAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVRdWVyeShfdGhpcy5xdWVyeSk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfdGhpcy5tb3ZpZXM7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRDYXRlZ29yeSgpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dC50MSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3ZpZXMgPSBfY29udGV4dC50MC5jb25jYXQuY2FsbChfY29udGV4dC50MCwgX2NvbnRleHQudDEpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgJyRyb3V0ZS5wYXJhbXMuaWQnOiBmdW5jdGlvbiAkcm91dGVQYXJhbXNJZChuZXh0LCBwcmV2KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKG5leHQgIT09IHByZXYpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMyLm1vdmllcyA9IFtdOwogICAgICAgICAgICAgICAgX3RoaXMyLnBhZ2UgPSAxOwoKICAgICAgICAgICAgICAgIF90aGlzMi51cGRhdGVRdWVyeShfdGhpczIucXVlcnkpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF90aGlzMi5tb3ZpZXM7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmdldENhdGVnb3J5KCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX3RoaXMyLm1vdmllcyA9IF9jb250ZXh0Mi50MC5jb25jYXQuY2FsbChfY29udGV4dDIudDAsIF9jb250ZXh0Mi50MSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmdldENhdGVnb3J5KCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgX3RoaXMzLm1vdmllcyA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTMpOwogICAgfSkpKCk7CiAgfSwKICBkZXN0cm95ZWQ6IGZ1bmN0aW9uIGRlc3Ryb3llZCgpIHsKICAgIHRoaXMubW92aWVzID0gW107CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRDYXRlZ29yeTogZnVuY3Rpb24gZ2V0Q2F0ZWdvcnkoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIHF1ZXJ5LCBpZCwgcmVzcG9uc2UsIF9yZXNwb25zZSR0b3RhbF9yZXN1bCwgdG90YWxfcmVzdWx0cywgX3Jlc3BvbnNlJHJlc3VsdHMsIHJlc3VsdHM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBxdWVyeSA9IF90aGlzNC5xdWVyeTsKICAgICAgICAgICAgICAgIGlkID0gX3RoaXM0LiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gYXBpLm1vdmllQ2F0ZWdvcnkuc2hvdyhpZCwgewogICAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgX3Jlc3BvbnNlJHRvdGFsX3Jlc3VsID0gcmVzcG9uc2UudG90YWxfcmVzdWx0cywgdG90YWxfcmVzdWx0cyA9IF9yZXNwb25zZSR0b3RhbF9yZXN1bCA9PT0gdm9pZCAwID8gMCA6IF9yZXNwb25zZSR0b3RhbF9yZXN1bCwgX3Jlc3BvbnNlJHJlc3VsdHMgPSByZXNwb25zZS5yZXN1bHRzLCByZXN1bHRzID0gX3Jlc3BvbnNlJHJlc3VsdHMgPT09IHZvaWQgMCA/IFtdIDogX3Jlc3BvbnNlJHJlc3VsdHM7CiAgICAgICAgICAgICAgICBfdGhpczQudG90YWwgPSB0b3RhbF9yZXN1bHRzOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHJlc3VsdHMpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB1cGRhdGVRdWVyeTogZnVuY3Rpb24gdXBkYXRlUXVlcnkocXVlcnkpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHF1ZXJ5OiBxdWVyeQogICAgICB9KTsKICAgIH0sCiAgICBuZXh0UGFnZTogZnVuY3Rpb24gbmV4dFBhZ2UoKSB7CiAgICAgIHRoaXMucGFnZSsrOwogICAgfQogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <section class=\"max-w-7xl mx-auto sm:px-6 lg:px-8 grid gap-4\">\n    <header class=\"flex justify-between\">\n      <h2 class=\"uppercase font-bold\">{{ name }} • {{ total }}</h2>\n    </header>\n    <div v-if=\"hasMovies\">\n      <MovieList :list=\"movies\" />\n      <IntersectionObserver\n        :options=\"{ rootMargin: '300px' }\"\n        @intersect=\"nextPage\"\n      />\n    </div>\n  </section>\n</template>\n\n<script>\nimport api from '@/api'\nimport MovieList from '@/components/MovieList'\nimport IntersectionObserver from '@/components/IntersectionObserver'\n\nexport default {\n  components: {\n    MovieList,\n    IntersectionObserver,\n  },\n  data() {\n    return {\n      page: 1,\n      movies: [],\n      total: 0,\n    }\n  },\n  computed: {\n    hasMovies() {\n      if (!this.movies) return\n      return this.movies.length > 0\n    },\n    name() {\n      const categoy = api.category.show(this.$route.params.id)\n      return categoy.name\n    },\n    query() {\n      return {\n        page: this.page,\n      }\n    },\n  },\n  watch: {\n    async 'query.page'(next, prev) {\n      if (next > prev) {\n        this.query.page = next\n        this.updateQuery(this.query)\n        this.movies = this.movies.concat(await this.getCategory())\n      }\n    },\n    async '$route.params.id'(next, prev) {\n      if (next !== prev) {\n        this.movies = []\n        this.page = 1\n        this.updateQuery(this.query)\n        this.movies = this.movies.concat(await this.getCategory())\n      }\n    },\n  },\n  async mounted() {\n    this.movies = await this.getCategory()\n  },\n  destroyed() {\n    this.movies = []\n  },\n  methods: {\n    async getCategory() {\n      const query = this.query\n      const id = this.$route.params.id\n      const response = await api.movieCategory.show(id, { query })\n      const { total_results = 0, results = [] } = response\n      this.total = total_results\n      return results\n    },\n    updateQuery(query) {\n      this.$router.push({ query })\n    },\n    nextPage() {\n      this.page++\n    },\n  },\n}\n</script>\n"],"sourceRoot":"src/views/Category"}]}