{"remainingRequest":"/Users/aleksej/Projects/what2vue/node_modules/babel-loader/lib/index.js!/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aleksej/Projects/what2vue/src/views/Movie/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/aleksej/Projects/what2vue/src/views/Movie/index.vue","mtime":1615025132862},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/babel-loader/lib/index.js","mtime":1610645748948},{"path":"/Users/aleksej/Projects/what2vue/node_modules/cache-loader/dist/cjs.js","mtime":1610645746854},{"path":"/Users/aleksej/Projects/what2vue/node_modules/vue-loader/lib/index.js","mtime":1610645763935}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy9hbGVrc2VqL1Byb2plY3RzL3doYXQydnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9hbGVrc2VqL1Byb2plY3RzL3doYXQydnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXBpIGZyb20gJ0AvYXBpJzsKCnZhciBnZXRGaXJzdFZpZGVvID0gZnVuY3Rpb24gZ2V0Rmlyc3RWaWRlbyhpZCkgewogIHJldHVybiAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgdmFyIHJlc3BvbnNlLCBfcmVzcG9uc2UkcmVzdWx0cywgZmlyc3RWaWRlbzsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gYXBpLm1vdmllVmlkZW9zLmluZGV4KGlkKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgX3Jlc3BvbnNlJHJlc3VsdHMgPSBfc2xpY2VkVG9BcnJheShyZXNwb25zZS5yZXN1bHRzLCAxKSwgZmlyc3RWaWRlbyA9IF9yZXNwb25zZSRyZXN1bHRzWzBdOwoKICAgICAgICAgICAgaWYgKGZpcnN0VmlkZW8pIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBpZiAoZmlyc3RWaWRlby5rZXkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBmaXJzdFZpZGVvLmtleSk7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwKICAgICAgbG9hZGVkOiBmYWxzZSwKICAgICAgbW92aWU6ICcnLAogICAgICB2aWRlbzogJycsCiAgICAgIHBlb3BsZToge30KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaXNGYXZvcml0ZTogZnVuY3Rpb24gaXNGYXZvcml0ZSgpIHsKICAgICAgcmV0dXJuICEhdGhpcy4kc3RvcmUuZ2V0dGVycy5zaG93KHRoaXMubW92aWUuaWQpOwogICAgfSwKICAgIHZpZGVvVVJMOiBmdW5jdGlvbiB2aWRlb1VSTCgpIHsKICAgICAgaWYgKCF0aGlzLnZpZGVvKSByZXR1cm47CiAgICAgIHJldHVybiAiaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvIi5jb25jYXQodGhpcy52aWRlbyk7CiAgICB9LAogICAgcG9zdGVyVVJMOiBmdW5jdGlvbiBwb3N0ZXJVUkwoKSB7CiAgICAgIGlmICghdGhpcy5tb3ZpZS5wb3N0ZXJfcGF0aCkgcmV0dXJuOwogICAgICByZXR1cm4gImh0dHBzOi8vaW1hZ2UudG1kYi5vcmcvdC9wL3c1MDAvIi5jb25jYXQodGhpcy5tb3ZpZS5wb3N0ZXJfcGF0aCk7CiAgICB9LAogICAgYmFja2dyb3VuZFVSTDogZnVuY3Rpb24gYmFja2dyb3VuZFVSTCgpIHsKICAgICAgaWYgKCF0aGlzLm1vdmllLmJhY2tkcm9wX3BhdGgpIHJldHVybjsKICAgICAgcmV0dXJuICJodHRwczovL2ltYWdlLnRtZGIub3JnL3QvcC93MTQwMF9hbmRfaDQ1MF9mYWNlLyIuY29uY2F0KHRoaXMubW92aWUuYmFja2Ryb3BfcGF0aCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRNb3ZpZVBhZ2UoKTsKICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZUxheW91dCcsICdTaW5nbGVQYWdlTGF5b3V0Jyk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB0b2dnbGVGYXZvcml0ZTogZnVuY3Rpb24gdG9nZ2xlRmF2b3JpdGUoKSB7CiAgICAgIHRoaXMuaXNGYXZvcml0ZSA/IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdERVNUUk9ZX0ZBVk9SSVRFJywgdGhpcy5tb3ZpZS5pZCkgOiB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnU1RPUkVfRkFWT1JJVEUnLCB0aGlzLm1vdmllKTsKICAgIH0sCiAgICBnZXRNb3ZpZTogZnVuY3Rpb24gZ2V0TW92aWUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBhcGkubW92aWUuc2hvdyhfdGhpcy5pZCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRNb3ZpZVBhZ2U6IGZ1bmN0aW9uIGdldE1vdmllUGFnZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRlZCA9IGZhbHNlOwoKICAgICAgdmFyIHNldE1vdmllID0gZnVuY3Rpb24gc2V0TW92aWUobW92aWUpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLm1vdmllID0gbW92aWUsIG1vdmllOwogICAgICB9OwoKICAgICAgdmFyIHNldFZpZGVvID0gZnVuY3Rpb24gc2V0VmlkZW8odmlkZW8pIHsKICAgICAgICBfdGhpczIudmlkZW8gPSB2aWRlbzsKICAgICAgfTsKCiAgICAgIHJldHVybiB0aGlzLmdldE1vdmllKCkudGhlbihzZXRNb3ZpZSkudGhlbihnZXRGaXJzdFZpZGVvKHRoaXMuaWQpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi5sb2FkZWQgPSB0cnVlOwogICAgICAgIHNldFZpZGVvKHJlc3BvbnNlKTsKICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA,OAAA,GAAA,MAAA,OAAA;;AAEA,IAAA,aAAA,GAAA,SAAA,aAAA,CAAA,EAAA;AAAA,8EAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACA,GAAA,CAAA,WAAA,CAAA,KAAA,CAAA,EAAA,CADA;;AAAA;AACA,YAAA,QADA;AAAA,+CAEA,QAAA,CAAA,OAFA,MAEA,UAFA;;AAAA,gBAGA,UAHA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,gBAIA,UAAA,CAAA,GAJA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,6CAKA,UAAA,CAAA,GALA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA;AAAA,CAAA;;AAQA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EADA;AAEA,MAAA,MAAA,EAAA,KAFA;AAGA,MAAA,KAAA,EAAA,EAHA;AAIA,MAAA,KAAA,EAAA,EAJA;AAKA,MAAA,MAAA,EAAA;AALA,KAAA;AAOA,GATA;AAUA,EAAA,QAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,aAAA,CAAA,CAAA,KAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,KAAA,KAAA,CAAA,EAAA,CAAA;AACA,KAHA;AAIA,IAAA,QAJA,sBAIA;AACA,UAAA,CAAA,KAAA,KAAA,EAAA;AACA,qDAAA,KAAA,KAAA;AACA,KAPA;AAQA,IAAA,SARA,uBAQA;AACA,UAAA,CAAA,KAAA,KAAA,CAAA,WAAA,EAAA;AACA,uDAAA,KAAA,KAAA,CAAA,WAAA;AACA,KAXA;AAYA,IAAA,aAZA,2BAYA;AACA,UAAA,CAAA,KAAA,KAAA,CAAA,aAAA,EAAA;AACA,sEAAA,KAAA,KAAA,CAAA,aAAA;AACA;AAfA,GAVA;AA2BA,EAAA,OA3BA,qBA2BA;AACA,SAAA,YAAA;AACA,SAAA,KAAA,CAAA,cAAA,EAAA,kBAAA;AACA,GA9BA;AA+BA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AACA,WAAA,UAAA,GACA,KAAA,MAAA,CAAA,QAAA,CAAA,kBAAA,EAAA,KAAA,KAAA,CAAA,EAAA,CADA,GAEA,KAAA,MAAA,CAAA,QAAA,CAAA,gBAAA,EAAA,KAAA,KAAA,CAFA;AAGA,KALA;AAMA,IAAA,QANA,sBAMA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,GAAA,CAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CADA;;AAAA;AACA,gBAAA,QADA;AAAA,kDAEA,QAFA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,KATA;AAUA,IAAA,YAVA,0BAUA;AAAA;;AACA,WAAA,MAAA,GAAA,KAAA;;AACA,UAAA,QAAA,GAAA,SAAA,QAAA,CAAA,KAAA;AAAA,eAAA,MAAA,CAAA,KAAA,GAAA,KAAA,EAAA,KAAA;AAAA,OAAA;;AAEA,UAAA,QAAA,GAAA,SAAA,QAAA,CAAA,KAAA,EAAA;AACA,QAAA,MAAA,CAAA,KAAA,GAAA,KAAA;AACA,OAFA;;AAIA,aAAA,KAAA,QAAA,GACA,IADA,CACA,QADA,EAEA,IAFA,CAEA,aAAA,CAAA,KAAA,EAAA,CAFA,EAGA,IAHA,CAGA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,IAAA;AACA,QAAA,QAAA,CAAA,QAAA,CAAA;AACA,eAAA,QAAA;AACA,OAPA,CAAA;AAQA;AA1BA;AA/BA,CAAA","sourcesContent":["<template>\n  <div v-if=\"movie\">\n    <div\n      class=\"banner\"\n      :style=\"{\n        backgroundColor: 'rgba(0, 0, 0, 0.55)',\n        backgroundImage: 'url(' + backgroundURL + ')',\n      }\"\n    ></div>\n    <section class=\"max-w-7xl mx-auto sm:px-6 lg:px-8\">\n      <div class=\"offset grid gap-2\">\n        <div class=\"flex flex-col sm:flex-row\">\n          <div class=\"poster order-2\">\n            <img v-if=\"posterURL\" class=\"poster__img\" :src=\"posterURL\" />\n          </div>\n          <div class=\"video order-1\">\n            <div v-if=\"videoURL\" class=\"ratio\">\n              <iframe\n                class=\"ratio-object\"\n                :src=\"videoURL\"\n                frameborder=\"0\"\n                allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n                allowfullscreen\n              ></iframe>\n            </div>\n          </div>\n        </div>\n        <div>\n          <h1 class=\"movie__title\">{{ movie.title }}</h1>\n          <button class=\"app-button\" @click=\"toggleFavorite\">\n            {{ isFavorite ? 'remove from' : 'add to' }} favorites\n          </button>\n          <div>\n            <router-link :to=\"{ name: 'cast' }\">cast</router-link>\n            <router-link :to=\"{ name: 'crew' }\">crew</router-link>\n          </div>\n          <transition name=\"fade\" mode=\"out-in\">\n            <router-view />\n          </transition>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport api from '@/api'\n\nconst getFirstVideo = (id) => async () => {\n  const response = await api.movieVideos.index(id)\n  const [firstVideo] = response.results\n  if (!firstVideo) return\n  if (!firstVideo.key) return\n  return firstVideo.key\n}\n\nexport default {\n  data() {\n    return {\n      id: this.$route.params.id,\n      loaded: false,\n      movie: '',\n      video: '',\n      people: {},\n    }\n  },\n  computed: {\n    isFavorite() {\n      return !!this.$store.getters.show(this.movie.id)\n    },\n    videoURL() {\n      if (!this.video) return\n      return `https://www.youtube.com/embed/${this.video}`\n    },\n    posterURL() {\n      if (!this.movie.poster_path) return\n      return `https://image.tmdb.org/t/p/w500/${this.movie.poster_path}`\n    },\n    backgroundURL() {\n      if (!this.movie.backdrop_path) return\n      return `https://image.tmdb.org/t/p/w1400_and_h450_face/${this.movie.backdrop_path}`\n    },\n  },\n  mounted() {\n    this.getMoviePage()\n    this.$emit('updateLayout', 'SinglePageLayout')\n  },\n  methods: {\n    toggleFavorite() {\n      this.isFavorite\n        ? this.$store.dispatch('DESTROY_FAVORITE', this.movie.id)\n        : this.$store.dispatch('STORE_FAVORITE', this.movie)\n    },\n    async getMovie() {\n      const response = await api.movie.show(this.id)\n      return response\n    },\n    getMoviePage() {\n      this.loaded = false\n      const setMovie = (movie) => ((this.movie = movie), movie)\n\n      const setVideo = (video) => {\n        this.video = video\n      }\n\n      return this.getMovie()\n        .then(setMovie)\n        .then(getFirstVideo(this.id))\n        .then((response) => {\n          this.loaded = true\n          setVideo(response)\n          return response\n        })\n    },\n  },\n}\n</script>\n\n<style scoped>\n.movie__title {\n  color: #f5f5f5;\n  font-size: 2rem;\n  line-height: 1.125;\n  text-align: center;\n}\n.ratio {\n  position: relative;\n  width: 100%;\n  padding-bottom: 56.5%;\n}\n\n.ratio-object {\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n.poster,\n.video {\n  width: 100%;\n}\n.poster__img {\n  width: 100%;\n  max-width: 100%;\n}\n\n.preview {\n  background-color: #0f1c26;\n  width: 100%;\n  overflow: hidden;\n  border-radius: 4px;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.12), 0 2px 4px 0 rgba(0, 0, 0, 0.08);\n}\n\n@media (min-width: 640px) {\n  .movie__title {\n    font-size: 3rem;\n  }\n  .offset {\n    transform: translateY(-200px);\n  }\n\n  .poster {\n    width: 27.5%;\n  }\n\n  .video {\n    width: 73%;\n  }\n\n  .banner {\n    background-color: #e5e5e5;\n    height: 500px;\n    background-size: cover;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-blend-mode: multiply;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/Movie"}]}